{"ast":null,"code":"import _slicedToArray from\"/Users/kashifdelvi/deploymentofreact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{axiosInstanceWithoutToken}from\"../api/axios\";import{useState}from'react';import{Button,Modal,Form}from'react-bootstrap';import{authentication}from\"../api/index\";import jwt_decode from\"jwt-decode\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginModal(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];return/*#__PURE__*/_jsxs(Modal,{show:true,onHide:props.handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Login\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username/email\"}),/*#__PURE__*/_jsx(Form.Control,{value:userName,type:\"email\",placeholder:\"Enter email\",onChange:handleEmailChange}),/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{value:password,type:\"password\",placeholder:\"Password\",onChange:handlePasswordChange})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:callAuthenticate,children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:props.handleClose,children:\"Cancel\"})]})]});function callAuthenticate(){var payload={'username':userName,'password':password};var URL=\"\".concat(authentication.login);axiosInstanceWithoutToken.post(URL,payload).then(function(res){if(res.status===200){var encodedToken=res.data.data.token;sessionStorage.setItem('token',encodedToken);props.handleClose();props.handleAuthenticated(true);var decoded=jwt_decode(encodedToken);console.log(decoded);props.handleSetDecodeToken(decoded);}});}function handleEmailChange(event){console.log(event.target.value);setUserName(event.target.value);}function handlePasswordChange(event){console.log(event.target.value);setPassword(event.target.value);}}export default LoginModal;","map":{"version":3,"names":["axiosInstanceWithoutToken","useState","Button","Modal","Form","authentication","jwt_decode","LoginModal","props","userName","setUserName","password","setPassword","handleClose","handleEmailChange","handlePasswordChange","callAuthenticate","payload","URL","login","post","then","res","status","encodedToken","data","token","sessionStorage","setItem","handleAuthenticated","decoded","console","log","handleSetDecodeToken","event","target","value"],"sources":["/Users/kashifdelvi/deploymentofreact/src/components/LoginModal.js"],"sourcesContent":["import {axiosInstanceWithoutToken} from \"../api/axios\"\nimport { useState } from 'react';\nimport { Button, Modal, Form } from 'react-bootstrap';\nimport {authentication} from \"../api/index\"\nimport jwt_decode from \"jwt-decode\";\n\n\nfunction LoginModal(props) {\n    const [userName, setUserName] = useState('');\n    const [password, setPassword] = useState('');\n    return (\n        <Modal show={true} onHide={props.handleClose}>\n            <Modal.Header closeButton>\n                <Modal.Title>Login</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form.Label>Username/email</Form.Label>\n                <Form.Control \n                    value={userName}\n                    type=\"email\" \n                    placeholder=\"Enter email\" \n                    onChange={handleEmailChange}/>\n                <Form.Label>Password</Form.Label>\n                <Form.Control \n                    value={password}\n                    type=\"password\" \n                    placeholder=\"Password\" \n                    onChange={handlePasswordChange}\n                />\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant=\"primary\" onClick={callAuthenticate}>\n                    Submit\n                </Button>\n                <Button variant=\"secondary\" onClick={props.handleClose}>\n                    Cancel\n                </Button>\n            </Modal.Footer>\n        </Modal>\n    )\n\n\n    function callAuthenticate(){\n        const payload = {\n            'username':userName,\n            'password':password\n        };\n        const URL =`${authentication.login}`;\n        axiosInstanceWithoutToken.post(URL,payload).then((res)=>{\n            if(res.status === 200){\n                const encodedToken = res.data.data.token;\n                sessionStorage.setItem('token',encodedToken);\n                props.handleClose();\n                props.handleAuthenticated(true);\n                const decoded = jwt_decode(encodedToken);\n                console.log(decoded)\n                props.handleSetDecodeToken(decoded)\n            }\n        })\n    }\n\n    function handleEmailChange(event){\n        console.log(event.target.value);\n        setUserName(event.target.value);\n    }\n\n    function handlePasswordChange(event){\n        console.log(event.target.value);\n        setPassword(event.target.value)\n    }\n}\n\nexport default LoginModal;"],"mappings":"0HAAA,OAAQA,yBAAyB,KAAO,cAAc,CACtD,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,MAAM,CAAEC,KAAK,CAAEC,IAAI,KAAQ,iBAAiB,CACrD,OAAQC,cAAc,KAAO,cAAc,CAC3C,MAAOC,WAAU,KAAM,YAAY,CAAC,wFAGpC,QAASC,WAAU,CAACC,KAAK,CAAE,CACvB,cAAgCP,QAAQ,CAAC,EAAE,CAAC,wCAArCQ,QAAQ,eAAEC,WAAW,eAC5B,eAAgCT,QAAQ,CAAC,EAAE,CAAC,yCAArCU,QAAQ,eAAEC,WAAW,eAC5B,mBACI,MAAC,KAAK,EAAC,IAAI,CAAE,IAAK,CAAC,MAAM,CAAEJ,KAAK,CAACK,WAAY,wBACzC,KAAC,KAAK,CAAC,MAAM,EAAC,WAAW,4BACrB,KAAC,KAAK,CAAC,KAAK,oBAAoB,EACrB,cACf,MAAC,KAAK,CAAC,IAAI,yBACP,KAAC,IAAI,CAAC,KAAK,6BAA4B,cACvC,KAAC,IAAI,CAAC,OAAO,EACT,KAAK,CAAEJ,QAAS,CAChB,IAAI,CAAC,OAAO,CACZ,WAAW,CAAC,aAAa,CACzB,QAAQ,CAAEK,iBAAkB,EAAE,cAClC,KAAC,IAAI,CAAC,KAAK,uBAAsB,cACjC,KAAC,IAAI,CAAC,OAAO,EACT,KAAK,CAAEH,QAAS,CAChB,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,UAAU,CACtB,QAAQ,CAAEI,oBAAqB,EACjC,GACO,cACb,MAAC,KAAK,CAAC,MAAM,yBACT,KAAC,MAAM,EAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAEC,gBAAiB,oBAE3C,cACT,KAAC,MAAM,EAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAER,KAAK,CAACK,WAAY,oBAE9C,GACE,GACX,CAIZ,QAASG,iBAAgB,EAAE,CACvB,GAAMC,QAAO,CAAG,CACZ,UAAU,CAACR,QAAQ,CACnB,UAAU,CAACE,QACf,CAAC,CACD,GAAMO,IAAG,WAAKb,cAAc,CAACc,KAAK,CAAE,CACpCnB,yBAAyB,CAACoB,IAAI,CAACF,GAAG,CAACD,OAAO,CAAC,CAACI,IAAI,CAAC,SAACC,GAAG,CAAG,CACpD,GAAGA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAC,CAClB,GAAMC,aAAY,CAAGF,GAAG,CAACG,IAAI,CAACA,IAAI,CAACC,KAAK,CACxCC,cAAc,CAACC,OAAO,CAAC,OAAO,CAACJ,YAAY,CAAC,CAC5ChB,KAAK,CAACK,WAAW,EAAE,CACnBL,KAAK,CAACqB,mBAAmB,CAAC,IAAI,CAAC,CAC/B,GAAMC,QAAO,CAAGxB,UAAU,CAACkB,YAAY,CAAC,CACxCO,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC,CACpBtB,KAAK,CAACyB,oBAAoB,CAACH,OAAO,CAAC,CACvC,CACJ,CAAC,CAAC,CACN,CAEA,QAAShB,kBAAiB,CAACoB,KAAK,CAAC,CAC7BH,OAAO,CAACC,GAAG,CAACE,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAC/B1B,WAAW,CAACwB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACnC,CAEA,QAASrB,qBAAoB,CAACmB,KAAK,CAAC,CAChCH,OAAO,CAACC,GAAG,CAACE,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAC/BxB,WAAW,CAACsB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACnC,CACJ,CAEA,cAAe7B,WAAU"},"metadata":{},"sourceType":"module"}