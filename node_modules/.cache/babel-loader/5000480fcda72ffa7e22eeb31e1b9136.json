{"ast":null,"code":"import _toConsumableArray from\"/Users/kashifdelvi/deploymentofreact/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/kashifdelvi/deploymentofreact/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/kashifdelvi/deploymentofreact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Card,Container,Row,Col,Alert,Pagination}from'react-bootstrap';import{useParams}from'react-router-dom';import ResturantListCard from\"./ResturantListCard\";import{axiosInstanceWithToken}from\"../api/axios\";import LocationTypeAhead from'./LocationTypeahead';import Form from'react-bootstrap/Form';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function RestuarantList(){var _useParams=useParams(),timingFilter=_useParams.timingFilter;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filteredResturants=_useState2[0],setFilteredResturants=_useState2[1];var timings={'BRF':'Breakfast','LCH':'Lunch','DNR':'Dinner','NGT':'Night','SKS':'Snacks','DRK':'Drink'};var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedCuisines=_useState4[0],setSelectedCuisines=_useState4[1];var _useState5=useState([{'name':'South Indian','code':'SI'},{'name':'North Indian','code':'NI'},{'name':'Chinese','code':'CHN'}]),_useState6=_slicedToArray(_useState5,1),cuisines=_useState6[0];var _useState7=useState({'timing_codes':[timingFilter]}),_useState8=_slicedToArray(_useState7,2),payload=_useState8[0],setPayload=_useState8[1];var limit=2;var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),totalPages=_useState10[0],setTotalPages=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),activePage=_useState12[0],setActivePage=_useState12[1];useEffect(function(){getResturants();},[payload,activePage]);useEffect(function(){setPayload(_objectSpread(_objectSpread({},payload),{},{'selectedCuisine':selectedCuisines}));},[selectedCuisines]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(\"h3\",{className:\"mb30\",children:[\"Resturant list who serves \",timings[timingFilter]]})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{lg:3,children:[/*#__PURE__*/_jsxs(Card,{className:\"p30\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Locations\"}),/*#__PURE__*/_jsx(LocationTypeAhead,{callResturants:getLocationPayload})]}),/*#__PURE__*/_jsx(Card,{className:\"p30\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb30\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Cuisines\"}),/*#__PURE__*/_jsx(Form,{children:cuisines.map(function(item,index){return/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",id:index+1,label:item.name,value:item.code,onClick:handleCuisineCheck},index);})})]})})]}),/*#__PURE__*/_jsxs(Col,{lg:9,children:[filteredResturants.length===0&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:\"Sorry no records found\"},'error'),filteredResturants.length>0&&filteredResturants.map(function(filteredResturant,index){return/*#__PURE__*/_jsx(ResturantListCard,{resturant:filteredResturant},index);}),/*#__PURE__*/_jsx(Pagination,{children:totalPages.map(function(item,index){return/*#__PURE__*/_jsx(Pagination.Item,{active:activePage===item+1,onClick:function onClick(){return updateActivePage(item+1);},children:item+1},index);})})]})]})]});function getResturants(){var defaultPayload={'limit':limit,'page':activePage};var payloadToSend={'params':_objectSpread(_objectSpread({},defaultPayload),payload)};axiosInstanceWithToken.get(\"/getResturants\",payloadToSend).then(function(res){var _res$data,_res$data$data,_res$data2,_res$data2$data;setFilteredResturants(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$data=_res$data.data)===null||_res$data$data===void 0?void 0:_res$data$data.resturants);var totalPagesArray=[];var totalPages=(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$data=_res$data2.data)===null||_res$data2$data===void 0?void 0:_res$data2$data.total)/limit;for(var i=0;i<totalPages;i++){totalPagesArray.push(i);}setTotalPages(totalPagesArray);});}function updateActivePage(activePage){setActivePage(activePage);}function getLocationPayload(locationPayload){setPayload(_objectSpread(_objectSpread({},payload),{},{'location_code':[locationPayload===null||locationPayload===void 0?void 0:locationPayload[0].code]}));}function handleCuisineCheck(event){if(event.target.checked){// push to array\nsetSelectedCuisines([].concat(_toConsumableArray(selectedCuisines),[event.target.value]));}else{// remove from array\nvar cloneSelectedCuisines=_toConsumableArray(selectedCuisines);var selectedIndex=cloneSelectedCuisines.findIndex(function(item){return item===event.target.value;});cloneSelectedCuisines.splice(selectedIndex,1);setSelectedCuisines(cloneSelectedCuisines);}}}export default RestuarantList;","map":{"version":3,"names":["React","useState","useEffect","Card","Container","Row","Col","Alert","Pagination","useParams","ResturantListCard","axiosInstanceWithToken","LocationTypeAhead","Form","RestuarantList","timingFilter","filteredResturants","setFilteredResturants","timings","selectedCuisines","setSelectedCuisines","cuisines","payload","setPayload","limit","totalPages","setTotalPages","activePage","setActivePage","getResturants","getLocationPayload","map","item","index","name","code","handleCuisineCheck","length","filteredResturant","updateActivePage","defaultPayload","payloadToSend","get","then","res","data","resturants","totalPagesArray","total","i","push","locationPayload","event","target","checked","value","cloneSelectedCuisines","selectedIndex","findIndex","splice"],"sources":["/Users/kashifdelvi/deploymentofreact/src/components/RestuarantList.js"],"sourcesContent":["import React, { useState , useEffect} from 'react';\nimport {Card,Container,Row,Col,Alert,Pagination} from 'react-bootstrap';\nimport {useParams} from 'react-router-dom';\nimport ResturantListCard from \"./ResturantListCard\";\nimport {axiosInstanceWithToken} from \"../api/axios\"\nimport LocationTypeAhead from './LocationTypeahead';\nimport Form from 'react-bootstrap/Form';\n\n\nfunction RestuarantList(){\n    let   {timingFilter} = useParams();\n    const [filteredResturants,setFilteredResturants] = useState([]);\n    const timings = {\n        'BRF':'Breakfast',\n        'LCH':'Lunch',\n        'DNR':'Dinner',\n        'NGT':'Night',\n        'SKS':'Snacks',\n        'DRK':'Drink',\n    };\n    const [selectedCuisines,setSelectedCuisines] = useState([]);\n    const [cuisines] = useState([\n        {\n            'name':'South Indian',\n            'code':'SI'\n        },\n        {\n            'name':'North Indian',\n            'code':'NI'\n        },\n        {\n            'name':'Chinese',\n            'code':'CHN'\n        }\n    ]);\n\n    const [payload,setPayload] = useState({'timing_codes':[timingFilter]});\n\n    const limit = 2;\n    const [totalPages,setTotalPages] = useState([]);\n    const [activePage,setActivePage] = useState(1);\n\n    useEffect(() => {\n        getResturants();\n    },[payload,activePage])\n\n    \n    useEffect(() => {\n        setPayload({...payload,'selectedCuisine':selectedCuisines})  \n    },[selectedCuisines])\n\n\n    return(\n         <Container>\n            <Row>\n                <h3 className='mb30'>Resturant list who serves {timings[timingFilter]}</h3>\n            </Row>\n            <Row>\n                <Col lg={3}>\n                    <Card className='p30'>\n                        <h5>Locations</h5>\n                        <LocationTypeAhead callResturants={getLocationPayload}/>                        \n                    </Card>\n                    <Card className='p30'>\n                        \n                        <div className='mb30'>\n                            <h5 >Cuisines</h5>\n                            <Form>\n                                {\n                                    cuisines.map((item,index)=>\n                                        <Form.Check \n                                            key={index}\n                                            type='checkbox'\n                                            id={index+1}\n                                            label={item.name}\n                                            value={item.code}\n                                            onClick={handleCuisineCheck}\n                                        />\n                                    )\n                                }\n                            </Form>\n                        </div>\n                    </Card>\n                    \n\n                </Col>\n\n                <Col lg={9}>\n                    {\n                        filteredResturants.length === 0 && <Alert key='error' variant='danger'>Sorry no records found</Alert>\n                    }\n                    {filteredResturants.length>0 && filteredResturants.map((filteredResturant,index) =>\n                            <ResturantListCard key={index} resturant={filteredResturant}/>\n                    )}\n                    <Pagination>\n                        {\n                            totalPages.map((item,index)=>\n                            <Pagination.Item \n                                key={index} \n                                active={activePage=== item+1} \n                                onClick={()=>updateActivePage(item+1)}>\n                                {item+1}\n                            </Pagination.Item>\n                        )}\n                    </Pagination>\n                </Col>\n            </Row>\n         </Container>\n    )\n\n    function getResturants(){\n        const defaultPayload = {\n            'limit':limit,\n            'page':activePage\n        }\n        const payloadToSend = {\n            'params':{...defaultPayload,...payload}\n        }\n        axiosInstanceWithToken.get(`/getResturants`,payloadToSend).then((res) => {\n            setFilteredResturants(res?.data?.data?.resturants)\n            const totalPagesArray = [];\n            const totalPages = res?.data?.data?.total/limit;\n            for(var i=0;i<totalPages;i++){\n                totalPagesArray.push(i)\n            }\n            setTotalPages(totalPagesArray);\n        })\n    }\n\n    function updateActivePage(activePage){\n        setActivePage(activePage)\n    }\n\n    function getLocationPayload(locationPayload){\n        setPayload({...payload,'location_code':[locationPayload?.[0].code]})\n    }\n\n    function handleCuisineCheck(event){\n        if(event.target.checked){\n            // push to array\n            setSelectedCuisines([...selectedCuisines,event.target.value])\n        } else{\n            // remove from array\n            const cloneSelectedCuisines = [...selectedCuisines];\n            const selectedIndex = cloneSelectedCuisines.findIndex((item)=>{\n                return item === event.target.value\n            })\n            cloneSelectedCuisines.splice(selectedIndex,1);\n            setSelectedCuisines(cloneSelectedCuisines)\n        }\n    }\n}\n\nexport default RestuarantList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}